!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},o={},r={}.hasOwnProperty,s=/^\.\.?(\/|$)/,i=function(e,t){for(var n,o=[],r=(s.test(t)?e+"/"+t:t).split("/"),i=0,a=r.length;i<a;i++)n=r[i],".."===n?o.pop():"."!==n&&""!==n&&o.push(n);return o.join("/")},a=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t){return function(n){var o=i(a(t),n);return e.require(o,t)}},l=function(e,t){var o=v&&v.createHot(e),r={id:e,exports:{},hot:o};return n[e]=r,t(r.exports,c(e),r),r.exports},u=function(e){return o[e]?u(o[e]):e},d=function(e,t){return u(i(a(e),t))},p=function(e,o){null==o&&(o="/");var s=u(e);if(r.call(n,s))return n[s].exports;if(r.call(t,s))return l(s,t[s]);throw new Error("Cannot find module '"+e+"' from '"+o+"'")};p.alias=function(e,t){o[t]=e};var f=/\.[^.\/]+$/,h=/\/index(\.[^\/]+)?$/,m=function(e){if(f.test(e)){var t=e.replace(f,"");r.call(o,t)&&o[t].replace(f,"")!==t+"/index"||(o[t]=e)}if(h.test(e)){var n=e.replace(h,"");r.call(o,n)||(o[n]=e)}};p.register=p.define=function(e,o){if(e&&"object"==typeof e)for(var s in e)r.call(e,s)&&p.register(s,e[s]);else t[e]=o,delete n[e],m(e)},p.list=function(){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};var v=e._hmr&&new e._hmr(d,p,t,n);p._cache=n,p.hmr=v&&v.wrap,p.brunch=!0,e.require=p}}(),function(){var e=("undefined"==typeof window?this:window,function(e,t,n){var o={},r=function(t,n){var s;try{return s=e(n+"/node_modules/"+t)}catch(i){if(i.toString().indexOf("Cannot find module")===-1)throw i;if(n.indexOf("node_modules")!==-1){var a=n.split("/"),c=a.lastIndexOf("node_modules"),l=a.slice(0,c).join("/");return r(t,l)}}return o};return function(s){if(s in t&&(s=t[s]),s){if("."!==s[0]&&n){var i=r(s,n);if(i!==o)return i}return e(s)}}});require.register("preact/dist/preact.js",function(t,n,o){n=e(n,{},"preact"),function(){!function(){"use strict";function e(){}function t(t,n){var o,r,s,i,a=A;for(i=arguments.length;i-- >2;)z.push(arguments[i]);for(n&&null!=n.children&&(z.length||z.push(n.children),delete n.children);z.length;)if((r=z.pop())&&void 0!==r.pop)for(i=r.length;i--;)z.push(r[i]);else"boolean"==typeof r&&(r=null),(s="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(s=!1)),s&&o?a[a.length-1]+=r:a===A?a=[r]:a.push(r),o=s;var c=new e;return c.nodeName=t,c.children=a,c.attributes=null==n?void 0:n,c.key=null==n?void 0:n.key,void 0!==O.vnode&&O.vnode(c),c}function n(e,t){for(var n in t)e[n]=t[n];return e}function r(e,o){return t(e.nodeName,n(n({},e.attributes),o),arguments.length>2?[].slice.call(arguments,2):e.children)}function s(e){!e.__d&&(e.__d=!0)&&1==D.push(e)&&(O.debounceRendering||T)(i)}function i(){var e,t=D;for(D=[];e=t.pop();)e.__d&&M(e)}function a(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&c(e,t.nodeName):n||e._componentConstructor===t.nodeName}function c(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function l(e){var t=n({},e.attributes);t.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);return t}function u(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.__n=e,n}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var s in n)s in o||(e.style[s]="");for(var s in o)e.style[s]="number"==typeof o[s]&&!1===V.test(s)?o[s]+"px":o[s]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,h,i):e.removeEventListener(t,h,i),(e.__l||(e.__l={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)f(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var a=r&&t!==(t=t.replace(/^xlink\:?/,""));null==o||!1===o?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function f(e,t,n){try{e[t]=n}catch(o){}}function h(e){return this.__l[e.type](O.event&&O.event(e)||e)}function m(){for(var e;e=I.pop();)O.afterMount&&O.afterMount(e),e.componentDidMount&&e.componentDidMount()}function v(e,t,n,o,r,s){F++||(q=null!=r&&void 0!==r.ownerSVGElement,U=null!=e&&!("__preactattr_"in e));var i=y(e,t,n,o,s);return r&&i.parentNode!==r&&r.appendChild(i),--F||(U=!1,s||m()),i}function y(e,t,n,o,r){var s=e,i=q;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(s=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(s,e),b(e,!0))),s.__preactattr_=!0,s;var a=t.nodeName;if("function"==typeof a)return E(e,t,n,o);if(q="svg"===a||"foreignObject"!==a&&q,a=String(a),(!e||!c(e,a))&&(s=u(a,q),e)){for(;e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),b(e,!0)}var l=s.firstChild,d=s.__preactattr_,p=t.children;if(null==d){d=s.__preactattr_={};for(var f=s.attributes,h=f.length;h--;)d[f[h].name]=f[h].value}return!U&&p&&1===p.length&&"string"==typeof p[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=p[0]&&(l.nodeValue=p[0]):(p&&p.length||null!=l)&&g(s,p,n,o,U||null!=d.dangerouslySetInnerHTML),w(s,t.attributes,d),q=i,s}function g(e,t,n,o,r){var s,i,c,l,u,p=e.childNodes,f=[],h={},m=0,v=0,g=p.length,_=0,w=t?t.length:0;if(0!==g)for(var x=0;x<g;x++){var C=p[x],S=C.__preactattr_,k=w&&S?C._component?C._component.__k:S.key:null;null!=k?(m++,h[k]=C):(S||(void 0!==C.splitText?!r||C.nodeValue.trim():r))&&(f[_++]=C)}if(0!==w)for(var x=0;x<w;x++){l=t[x],u=null;var k=l.key;if(null!=k)m&&void 0!==h[k]&&(u=h[k],h[k]=void 0,m--);else if(!u&&v<_)for(s=v;s<_;s++)if(void 0!==f[s]&&a(i=f[s],l,r)){u=i,f[s]=void 0,s===_-1&&_--,s===v&&v++;break}u=y(u,l,n,o),c=p[x],u&&u!==e&&u!==c&&(null==c?e.appendChild(u):u===c.nextSibling?d(c):e.insertBefore(u,c))}if(m)for(var x in h)void 0!==h[x]&&b(h[x],!1);for(;v<=_;)void 0!==(u=f[_--])&&b(u,!1)}function b(e,t){var n=e._component;n?j(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||d(e),_(e))}function _(e){for(e=e.lastChild;e;){var t=e.previousSibling;b(e,!0),e=t}}function w(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||p(e,o,n[o],n[o]=void 0,q);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||p(e,o,n[o],n[o]=t[o],q)}function x(e){var t=e.constructor.name;(H[t]||(H[t]=[])).push(e)}function C(e,t,n){var o,r=H[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),N.call(o,t,n)):(o=new N(t,n),o.constructor=e,o.render=S),r)for(var s=r.length;s--;)if(r[s].constructor===e){o.__b=r[s].__b,r.splice(s,1);break}return o}function S(e,t,n){return this.constructor(e,n)}function k(e,t,n,o,r){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.__c||(e.__c=e.context),e.context=o),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===O.syncComponentUpdates&&e.base?s(e):M(e,1,r)),e.__r&&e.__r(e))}function M(e,t,o,r){if(!e.__x){var s,i,a,c=e.props,u=e.state,d=e.context,p=e.__p||c,f=e.__s||u,h=e.__c||d,y=e.base,g=e.__b,_=y||g,w=e._component,x=!1;if(y&&(e.props=p,e.state=f,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,u,d)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(c,u,d),e.props=c,e.state=u,e.context=d),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!x){s=e.render(c,u,d),e.getChildContext&&(d=n(n({},d),e.getChildContext()));var S,E,N=s&&s.nodeName;if("function"==typeof N){var P=l(s);i=w,i&&i.constructor===N&&P.key==i.__k?k(i,P,1,d,!1):(S=i,e._component=i=C(N,P,d),i.__b=i.__b||g,i.__u=e,k(i,P,0,d,!1),M(i,1,o,!0)),E=i.base}else a=_,S=w,S&&(a=e._component=null),(_||1===t)&&(a&&(a._component=null),E=v(a,s,d,o||!y,_&&_.parentNode,!0));if(_&&E!==_&&i!==w){var z=_.parentNode;z&&E!==z&&(z.replaceChild(E,_),S||(_._component=null,b(_,!1)))}if(S&&j(S),e.base=E,E&&!r){for(var A=e,T=e;T=T.__u;)(A=T).base=E;E._component=A,E._componentConstructor=A.constructor}}if(!y||o?I.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(p,f,h),O.afterUpdate&&O.afterUpdate(e)),null!=e.__h)for(;e.__h.length;)e.__h.pop().call(e);F||r||m()}}function E(e,t,n,o){for(var r=e&&e._component,s=r,i=e,a=r&&e._componentConstructor===t.nodeName,c=a,u=l(t);r&&!c&&(r=r.__u);)c=r.constructor===t.nodeName;return r&&c&&(!o||r._component)?(k(r,u,3,n,o),e=r.base):(s&&!a&&(j(s),e=i=null),r=C(t.nodeName,u,n),e&&!r.__b&&(r.__b=e,i=null),k(r,u,1,n,o),e=r.base,i&&e!==i&&(i._component=null,b(i,!1))),e}function j(e){O.beforeUnmount&&O.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?j(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.__b=t,d(t),x(e),_(t)),e.__r&&e.__r(null)}function N(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}function P(e,t,n){return v(n,e,{},!1,t,!1)}var O={},z=[],A=[],T="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,V=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,D=[],I=[],F=0,q=!1,U=!1,H={};n(N.prototype,{setState:function(e,t){var o=this.state;this.__s||(this.__s=n({},o)),n(o,"function"==typeof e?e(o,this.props):e),t&&(this.__h=this.__h||[]).push(t),s(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),M(this,2)},render:function(){}});var L={h:t,createElement:t,cloneElement:r,Component:N,render:P,rerender:i,options:O};"undefined"!=typeof o?o.exports=L:self.preact=L}()}()}),require.register("js/shared/config.js",function(e,t,n){"use strict";var o=10,r=40,s=10,i=25,a=8,c=2e-5,l=4,u=50,d=150,p=0,f=1,h=s/o*f;n.exports={metre:o,numOfNodes:r,nominalStringLength:s,springConstant:i,internalViscousFrictionConstant:a,viscousConstant:c,simulationSpeed:l,maxStep:u,dangerForceMax:d,dangerForceMin:p,ropeWeightPerMetre:f,ropeWeightPerNode:h}}),require.register("js/shared/constants.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.ControlsEnum=Object.freeze({pan:"pan",grab:"grab",anchor:"anchor",erase:"erase",rope:"rope",pause:"pause"}),r=e.ActionsEnum=Object.freeze({init:"init",run:"run",pause:"pause",send:"send",load:"load",move:"move",nomove:"nomove",addanchor:"addanchor",addnodes:"addnodes",deletenode:"deletenode",usewasm:"usewasm"});n.exports={ControlsEnum:o,ActionsEnum:r}}),require.register("js/shared/helper.js",function(e,t,n){"use strict";function o(e,t){return t.find(function(t){return t.id===e})}function r(e,t){var n=Math.abs(e.position.x-t.position.x),o=Math.abs(e.position.y-t.position.y);return Math.sqrt(n*n+o*o)}function s(e,t){return{x:(e.position.x+t.position.x)/2,y:(e.position.y+t.position.y)/2}}function i(e,t){return Math.atan2(t.position.y-e.position.y,t.position.x-e.position.x)}function a(e,t){var n=r(e,t),o=n-c.nominalStringLength,s=i(e,t),a=Math.sin(s)*o*c.springConstant,l=Math.cos(s)*o*c.springConstant,u=Math.sqrt(a*a+(l+l));return{total:u,x:l,y:a}}var c=t("js/shared/config");n.exports={getAngleFromHorizontal:i,getForce:a,getLength:r,getMidpoint:s,getNode:o}}),require.register("js/shared/node.js",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){return a+=1}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=t("js/shared/vector").Vector,a=-1,c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],p=arguments[8];o(this,e),this.id=p||0===p?p:r(),this.position=new i(t,n),this.velocity=new i(s,a),this.force=new i(c,l),this.fixed=u,this.connectedNodes=d,this.grabbed=!1}return s(e,[{key:"getObject",value:function(){return{id:this.id,position:this.position,velocity:this.velocity,force:this.force,fixed:this.fixed,grabbed:this.grabbed,connectedNodes:this.connectedNodes}}},{key:"loadObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=e.id||this.id,this.position=e.position||this.position,this.velocity=e.velocity||this.velocity,this.force=e.force||this.force,this.fixed=e.fixed||this.fixed,this.connectedNodes=e.connectedNodes||this.connectedNodes,this.grabbed=!1}},{key:"copy",value:function(){return new e(this.position.x,this.position.y,this.velocity.x,this.velocity.y,this.force.x,this.force.y,this.fixed,this.connectedNodes,this.id)}}]),e}();n.exports={Node:c}}),require.register("js/shared/vector.js",function(e,t,n){"use strict";function o(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}o.prototype={load:function(e){return new o(e.x||0,e.y||0,e.z||0)},negative:function(){return new o((-this.x),(-this.y),(-this.z))},add:function(e){return e instanceof o?new o(this.x+e.x,this.y+e.y,this.z+e.z):new o(this.x+e,this.y+e,this.z+e)},subtract:function(e){return e instanceof o?new o(this.x-e.x,this.y-e.y,this.z-e.z):new o(this.x-e,this.y-e,this.z-e)},multiply:function(e){return e instanceof o?new o(this.x*e.x,this.y*e.y,this.z*e.z):new o(this.x*e,this.y*e,this.z*e)},divide:function(e){return e instanceof o?new o(this.x/e.x,this.y/e.y,this.z/e.z):new o(this.x/e,this.y/e,this.z/e)},modulus:function(e){return e instanceof o?new o(this.x%e.x,this.y%e.y,this.z%e.z):new o(this.x%e,this.y%e,this.z%e)},positive:function(){return new o(Math.abs(this.x),Math.abs(this.y),Math.abs(this.z))},equals:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){return new o(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.divide(this.length())},min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},angleTo:function(e){return Math.acos(this.dot(e)/(this.length()*e.length()))},toArray:function(e){return[this.x,this.y,this.z].slice(0,e||3)},clone:function(){return new o(this.x,this.y,this.z)},init:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},o.negative=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},o.add=function(e,t,n){return n=n?n:new o,t instanceof o?(n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z):(n.x=e.x+t,n.y=e.y+t,n.z=e.z+t),n},o.subtract=function(e,t,n){return n=n?n:new o,t instanceof o?(n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z):(n.x=e.x-t,n.y=e.y-t,n.z=e.z-t),n},o.multiply=function(e,t,n){return n=n?n:new o,t instanceof o?(n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z):(n.x=e.x*t,n.y=e.y*t,n.z=e.z*t),n},o.divide=function(e,t,n){return t instanceof o?(n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z):(n.x=e.x/t,n.y=e.y/t,n.z=e.z/t),n},o.cross=function(e,t,n){return n.x=e.y*t.z-e.z*t.y,n.y=e.z*t.x-e.x*t.z,n.z=e.x*t.y-e.y*t.x,n},o.unit=function(e,t){var n=e.length();return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t},o.fromAngles=function(e,t){return new o(Math.cos(e)*Math.cos(t),Math.sin(t),Math.sin(e)*Math.cos(t))},o.randomDirection=function(){return o.fromAngles(Math.random()*Math.PI*2,Math.asin(2*Math.random()-1))},o.min=function(e,t){return new o(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.min(e.z,t.z))},o.max=function(e,t){return new o(Math.max(e.x,t.x),Math.max(e.y,t.y),Math.max(e.z,t.z))},o.lerp=function(e,t,n){return t.subtract(e).multiply(n).add(e)},o.fromArray=function(e){return new o(e[0],e[1],e[2])},o.angleBetween=function(e,t){return e.angleTo(t)},n.exports={Vector:o}}),require.register("js/shared/wasm-arrays.js",function(e,t,n){"use strict";var o=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=r.heapIn,i=void 0===s?"HEAPF32":s,a=r.heapOut,c=void 0===a?"HEAPF32":a,l=r.returnArraySize,u=void 0===l?1:l,d={};d.HEAP8=Int8Array,d.HEAPU8=Uint8Array,d.HEAP16=Int16Array,d.HEAPU16=Uint16Array,d.HEAP32=Int32Array,d.HEAPU32=Uint32Array,d.HEAPF32=Float32Array,d.HEAPF64=Float64Array;var p=void 0,f=void 0;n=n||[];var h="array"==t?"number":t,m=[],v=[],y=[];try{if(o)for(var g=0;g<o.length;g++)if("array"==n[g]||Array.isArray(o[g])){var b=new d[i](o[g]),_=Module._malloc(b.length*b.BYTES_PER_ELEMENT);switch(i){case"HEAP8":case"HEAPU8":Module[i].set(b,_);break;case"HEAP16":case"HEAPU16":Module[i].set(b,_>>1);break;case"HEAP32":case"HEAPU32":case"HEAPF32":Module[i].set(b,_>>2);break;case"HEAPF64":Module[i].set(b,_>>3)}y.push(_),m.push(_),m.push(o[g].length),v.push("number"),v.push("number")}else m.push(o[g]),v.push(void 0==n[g]?"number":n[g]);p=Module.ccall(e,h,v,m)}catch(w){f=w}finally{}if(f)throw f;if("array"==t){for(var x=[],C=0;C<u;C++)x.push(Module[c][p/d[c].BYTES_PER_ELEMENT+C]);return x}return p},r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=r.heapIn,i=void 0===s?"HEAPF32":s,a=r.heapOut,c=void 0===a?"HEAPF32":a,l=r.returnArraySize,u=void 0===l?1:l;return function(r){return o(e,t,n,r,{heapIn:i,heapOut:c,returnArraySize:u})}};"undefined"==typeof window&&(e.ccallArrays=o)&(e.cwrapArrays=r)}),require.register("js/initialise.js",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=t("preact"),s=t("./ui/components/App"),i=o(s);document.addEventListener("DOMContentLoaded",function(){(0,r.render)((0,r.h)(i["default"],null),document.querySelector("#app"))})}),require.register("js/ui/components/App.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=t("preact"),u=t("js/ui/components/canvas/canvas"),d=r(u),p=t("js/ui/components/controls/controls"),f=r(p),h=t("js/ui/components/stats/stats"),m=r(h),v=t("js/ui/components/save-modal/save-modal"),y=r(v),g=t("js/ui/components/load-modal/load-modal"),b=r(g),_=t("js/shared/vector.js"),w=t("js/shared/constants.js"),x=t("js/shared/config"),C=(o(x),function(e){function t(e){s(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onFrame=function(){var e=self.performance.now();e-n.state.time>1e3&&n.setState({time:e,fps:n.state.frames,frames:0}),n.setState({frames:n.state.frames+1}),n.state.worker.postMessage({type:w.ActionsEnum.send}),requestAnimationFrame(n.onFrame)},n.handleWorker=function(e){n.setState({nodes:e.data.nodes,trueSimulationSpeed:e.data.trueSimulationSpeed,elapsedTimeSumAverage:e.data.elapsedTimeSumAverage})},n.changeControl=function(e){n.setState({selectedControl:e})},n.changeScale=function(e){var t=n.state.scale;!e&&t<=1||e&&t<1?(e?t+=.1:t-=.1,t=Math.round(10*t)/10):e?t+=1:t-=1,t<=0||n.setState({scale:t})},n.changeOption=function(e,t){var o=n.state.options;o[e]=t,n.setState({options:o})},n.changeOriginCoords=function(e){n.setState({originCoords:e})},n.save=function(){n.setState({saveData:btoa(JSON.stringify(n.state.nodes)),saveModalVisible:!0})},n.setWasm=function(e){n.state.worker.postMessage({type:w.ActionsEnum.usewasm,useWasm:e})};var o=new Worker("worker.js");return o.onmessage=n.handleWorker,o.postMessage({type:w.ActionsEnum.init}),n.state={worker:o,nodes:[],selectedControl:w.ControlsEnum.pan,scale:1,options:{showIDs:!1},saveData:null,saveModalVisible:!1,loadModalVisible:!1,trueSimulationSpeed:1,elapsedTimeSumAverage:0,originCoords:new _.Vector(0,0),fps:0,frames:0,time:self.performance.now()},n}return a(t,e),c(t,[{key:"componentDidMount",value:function(){requestAnimationFrame(this.onFrame),this.state.worker.postMessage({type:w.ActionsEnum.run})}},{key:"render",value:function(){var e=this;return(0,l.h)("main",null,(0,l.h)(d["default"],{options:this.state.options,nodes:this.state.nodes,worker:this.state.worker,selectedControl:this.state.selectedControl,scale:this.state.scale,changeOriginCoords:this.changeOriginCoords}),(0,l.h)(f["default"],{worker:this.state.worker,selectedControl:this.state.selectedControl,changeControl:this.changeControl,changeScale:this.changeScale,scale:this.state.scale,options:this.state.options,changeOption:this.changeOption,save:this.save,load:function(){return e.setState({loadModalVisible:!0})},setWasm:this.setWasm}),(0,l.h)(m["default"],{trueSimulationSpeed:this.state.trueSimulationSpeed,elapsedTimeSumAverage:this.state.elapsedTimeSumAverage,originCoords:this.state.originCoords,fps:this.state.fps}),(0,l.h)(y["default"],{visible:this.state.saveModalVisible,saveData:this.state.saveData,close:function(){return e.setState({saveModalVisible:!1})}}),(0,l.h)(b["default"],{visible:this.state.loadModalVisible,worker:this.state.worker,close:function(){return e.setState({loadModalVisible:!1})}}))}}]),t}(l.Component));e["default"]=C}),require.register("js/ui/components/canvas/canvas.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=t("preact"),l=t("js/shared/config"),u=o(l),d=t("js/shared/helper"),p=o(d),f=t("js/shared/vector"),h=t("js/shared/node"),m=t("js/shared/constants"),v=function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUniqueID=function(){for(var e=0,t=!0;t;){if(!n.props.nodes.find(function(t){return t.id===e})&&!n.state.newNodes.find(function(t){return t.id===e}))return e;e++}},n.getMouseScreenPosition=function(e){var t=n.canvas.getBoundingClientRect();return e.type.includes("touch")?new f.Vector(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top):new f.Vector(e.clientX-t.left,e.clientY-t.top)},n.getMouseCanvasPosition=function(e){var t=n.getMouseScreenPosition(e);return t.subtract(n.state.transform.translate).divide(n.state.transform.scale)},n.updateMousePosition=function(e){var t=n.getMouseCanvasPosition(e);n.setState({mousePosition:t})},n.getNearestNode=function(e,t,o){var r=n.getNearestNodes(e,t,o);return r.length>0?r[0]:null},n.getNearestNodes=function(e,t,n){var o=[];return n.forEach(function(n){var r=(new f.Vector).load(n.position),s=r.subtract(e).length();s<t&&o.push({node:n,distance:s})}),o.sort(function(e,t){return e.distance-t.distance}).map(function(e){return e.node})},n.setupInteractions=function(){var e=n.canvas;e.addEventListener("mousedown",n.handleInteractStart,!0),e.addEventListener("touchstart",function(e){n.updateMousePosition(e),n.handleInteractStart(e)},!0),e.addEventListener("mousemove",n.handleInteractMove,!0),e.addEventListener("touchmove",function(e){n.updateMousePosition(e),n.handleInteractMove(e)},!0),e.addEventListener("mouseup",n.handleInteractEnd,!0),e.addEventListener("touchend",function(e){n.handleInteractEnd(e)},!0),document.onkeydown=function(e){var t=new f.Vector(0,0);switch(e.keyCode){case 37:t=new f.Vector(1,0);break;case 38:t=new f.Vector(0,1);break;case 39:t=new f.Vector((-1),0);break;case 40:t=new f.Vector(0,(-1));break;default:e=e||window.event,console.log("Unrecognised key "+e.keyCode)}var o=n.state.transform.translate.add(t);n.props.changeOriginCoords(o.multiply(-1)),n.setState({transform:{translate:o,scale:n.state.transform.scale}})}},n.handleInteractStart=function(e){e.preventDefault();var t=n.canvas,o=(t.getBoundingClientRect(),n.state.mousePosition);switch(n.setState({mousedown:!0}),n.props.selectedControl){case m.ControlsEnum.grab:var r=(n.state.hightlightNodeID,n.getNearestNode(o,20,n.props.nodes));n.setState({selectedNode:r});break;case m.ControlsEnum.pan:n.setState({startCoords:n.getMouseScreenPosition(e).subtract(n.state.transform.translate)});break;case m.ControlsEnum.anchor:n.props.worker.postMessage({type:m.ActionsEnum.addanchor,mousePosition:o});break;case m.ControlsEnum.erase:var s=n.getNearestNodes(o,5,n.props.nodes);s.forEach(function(e){n.props.worker.postMessage({type:m.ActionsEnum.deletenode,node:e})});break;case m.ControlsEnum.rope:var i=new h.Node(o.x,o.y,0,0,0,0,(!1),[],n.getUniqueID()),a=n.getNearestNode(o,5,n.props.nodes);a&&(i.connectedNodes.push(a.id),a.connectedNodes.push(i.id)),n.setState({startCoords:new f.Vector(i.position.x,i.position.y),newNodes:[i]})}},n.handleInteractMove=function(e){e.preventDefault();var t=n.getMouseScreenPosition(e),o=n.getMouseCanvasPosition(e);switch(n.setState({mousePosition:o}),n.props.selectedControl){case m.ControlsEnum.grab:if(!n.state.mousedown){var r=n.getNearestNode(o,5,n.props.nodes);n.setState({hightlightNodeID:r?r.id:null})}break;case m.ControlsEnum.pan:if(n.state.mousedown){var s=new f.Vector(t.x,t.y).subtract(n.state.startCoords);n.props.changeOriginCoords(s.multiply(-1)),n.setState({transform:{translate:s,scale:n.state.transform.scale}})}break;case m.ControlsEnum.erase:if(n.state.mousedown){var i=n.getNearestNodes(o,5,n.props.nodes);i.forEach(function(e){n.props.worker.postMessage({type:m.ActionsEnum.deletenode,node:e})})}else{var a=n.getNearestNode(o,5,n.props.nodes);n.setState({hightlightNodeID:a?a.id:null})}break;case m.ControlsEnum.rope:if(n.state.mousedown){var c=n.state.startCoords.subtract(o).length();if(c>u.nominalStringLength){var l=new h.Node(o.x,o.y,0,0,0,0,(!1),[],n.getUniqueID()),d=n.state.newNodes,p=d[d.length-1];p.connectedNodes.push(l.id),l.connectedNodes.push(p.id),d.push(l),n.setState({newNodes:d,startCoords:new f.Vector(o.x,o.y)})}}var v=n.getNearestNode(o,5,n.props.nodes);n.setState({hightlightNodeID:v?v.id:null})}},n.handleInteractEnd=function(e){e.preventDefault();var t=n.state.mousePosition;switch(n.setState({mousedown:!1}),n.props.selectedControl){case m.ControlsEnum.grab:n.state.selectedNode&&(n.props.worker.postMessage({type:m.ActionsEnum.nomove,node:n.state.selectedNode}),n.setState({selectedNode:null}));break;case m.ControlsEnum.pan:n.setState({startCoords:null});break;case m.ControlsEnum.rope:var o=n.state.newNodes[n.state.newNodes.length-1],r=n.props.nodes,s=n.getNearestNode(t,5,r);s&&(o.connectedNodes.push(s.id),r=n.props.nodes.map(function(e){return e.id===s.id&&e.connectedNodes.push(o.id),e})),n.props.worker.postMessage({type:m.ActionsEnum.addnodes,nodes:n.state.newNodes}),n.setState({newNodes:[],nodes:r.concat(n.state.newNodes)})}},n.draw=function(){var e=new f.Vector(n.canvas.width,n.canvas.height),t=e.divide(n.state.transform.scale),o=n.state.transform.translate.divide(n.state.transform.scale).multiply(-1).add(t.divide(2)),r=n.props.options.showIDs,s=n.canvas.getContext("2d"),i=n.props.nodes;s.strokeStyle="rgb(0,0,0)",s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,n.canvas.width,n.canvas.height),s.setTransform(n.state.transform.scale.x,0,0,n.state.transform.scale.y,n.state.transform.translate.x,n.state.transform.translate.y),s.fillStyle="rgb(0, 0, 255)",s.fillRect(o.x-2,o.y-2,5,5),s.fillStyle="rgb(0, 0, 0)",s.strokeStyle="#d0d0d0";for(var a=10*u.metre,c=new f.Vector(n.canvas.width,n.canvas.height).divide(n.state.transform.scale).add(a),l=n.state.transform.translate.divide(n.state.transform.scale),d=l.modulus(a),h=0;h<c.x;h+=a)s.beginPath(),s.moveTo(h-l.x+d.x,0-l.y),s.lineTo(h-l.x+d.x,c.y-l.y),s.stroke();for(var v=0;v<c.y;v+=a)s.beginPath(),s.moveTo(0-l.x,v-l.y+d.y),s.lineTo(c.x-l.x,v-l.y+d.y),s.stroke();s.strokeStyle="rgb(0,0,0)",n.state.mousedown&&n.props.selectedControl===m.ControlsEnum.erase&&(s.beginPath(),s.arc(n.state.mousePosition.x,n.state.mousePosition.y,5,0,2*Math.PI),s.stroke()),s.beginPath(),s.moveTo(10,100),s.lineTo(10,100+10*u.metre),s.fillText("10m",11,100+10*u.metre/2),s.stroke();var y=[],g=function(e,t,n){if(y.indexOf(n.toString()+e.id.toString())<0){s.beginPath();var o=p.getNode(n,t);s.moveTo(o.position.x,o.position.y),s.lineTo(e.position.x,e.position.y),y.push(e.id.toString()+o.id.toString());var r=p.getForce(e,o);if(r.total>=u.dangerForceMin&&r.total<u.dangerForceMax){var i=(r.total-u.dangerForceMin)/(u.dangerForceMax-u.dangerForceMin),a=255*i;s.strokeStyle="rgb("+a.toFixed(0)+", 0, 0)"}else r.total>=u.dangerForceMax?s.strokeStyle="rgb(255, 0, 0)":s.strokeStyle="rgb(0,0,0)";s.stroke()}};i.concat(n.state.newNodes).forEach(function(e){e.connectedNodes.forEach(g.bind(n,e,i.concat(n.state.newNodes))),s.beginPath(),e.id===n.state.hightlightNodeID&&(s.fillStyle="rgb(0, 255, 0)"),e.fixed?s.fillRect(e.position.x-2,e.position.y-2,5,5):s.fillRect(e.position.x-1,e.position.y-1,3,3),s.fillStyle="rgb(0, 0, 0)",r&&s.fillText(e.id,e.position.x+1,e.position.y),s.stroke()})},n.state={mousedown:!1,selectedNode:null,newNodes:[],mousePosition:new f.Vector(0,0),startCoords:new f.Vector(0,0),transform:{translate:new f.Vector(0,0),scale:new f.Vector(1,1)},scaled:!1,hightlightNodeID:null},n}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.setupInteractions()}},{key:"componentWillReceiveProps",value:function(e){this.setState({transform:{translate:this.state.transform.translate,scale:new f.Vector(this.props.scale,this.props.scale)}})}},{key:"componentDidUpdate",value:function(){this.draw(),this.state.selectedNode&&this.props.worker.postMessage({type:m.ActionsEnum.move,selectedNode:this.state.selectedNode,mousePosition:this.state.mousePosition})}},{key:"render",value:function(){var e=this;return(0,c.h)("canvas",{ref:function(t){return e.canvas=t},id:"canvas",width:window.innerWidth,height:window.innerHeight})}}]),t}(c.Component);e["default"]=v}),require.register("js/ui/components/controls/controls.js",function(e,t,n){
"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=t("preact"),c=t("js/shared/constants.js"),l=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={optionsVisible:!1,paused:!1,wasm:!0},n}return s(t,e),i(t,[{key:"render",value:function(){var e=this;return(0,a.h)("div",{"class":"controls"},(0,a.h)("div",{"class":"buttons has-addons"},(0,a.h)("button",{"class":"button is-small "+(this.props.selectedControl==c.ControlsEnum.pan&&"is-primary"),onClick:function(){e.props.changeControl(c.ControlsEnum.pan)}},(0,a.h)("span",{"class":"icon"},(0,a.h)("i",{"class":"far fa-hand-paper"}))),(0,a.h)("button",{"class":"button is-small "+(this.props.selectedControl==c.ControlsEnum.grab&&"is-primary"),onClick:function(){e.props.changeControl(c.ControlsEnum.grab)}},(0,a.h)("span",{"class":"icon"},(0,a.h)("i",{"class":"far fa-hand-rock"}))),(0,a.h)("button",{"class":"button is-small "+(this.props.selectedControl==c.ControlsEnum.anchor&&"is-primary"),onClick:function(){e.props.changeControl(c.ControlsEnum.anchor)}},(0,a.h)("span",{"class":"icon"},(0,a.h)("i",{"class":"fas fa-plus"}))),(0,a.h)("button",{"class":"button is-small "+(this.props.selectedControl==c.ControlsEnum.rope&&"is-primary"),onClick:function(){e.props.changeControl(c.ControlsEnum.rope)}},(0,a.h)("span",{"class":"icon"},(0,a.h)("i",{"class":"fas fa-pencil-alt"}))),(0,a.h)("button",{"class":"button is-small "+(this.props.selectedControl==c.ControlsEnum.erase&&"is-primary"),onClick:function(){e.props.changeControl(c.ControlsEnum.erase)}},(0,a.h)("span",{"class":"icon"},(0,a.h)("i",{"class":"fas fa-eraser"}))),(0,a.h)("button",{"class":"button is-small",onClick:function(){e.props.changeScale(!1)}},(0,a.h)("span",{"class":"icon"},"-")),(0,a.h)("button",{"class":"button is-small",disabled:!0},this.props.scale),(0,a.h)("button",{"class":"button is-small",onClick:function(){e.props.changeScale(!0)}},(0,a.h)("span",{"class":"icon"},"+")),(0,a.h)("button",{"class":"button is-small "+(this.props.selectedControl==c.ControlsEnum.pause&&"is-primary"),onClick:function(){e.props.worker.postMessage({type:e.state.paused?c.ActionsEnum.run:c.ActionsEnum.pause}),e.setState({paused:!e.state.paused})}},(0,a.h)("span",{"class":"icon"},(0,a.h)("i",{"class":"fas "+(this.state.paused?"fa-play":"fa-pause")}))),(0,a.h)("button",{"class":"button is-small "+(this.state.wasm&&"is-primary"),onClick:function(){e.props.setWasm(!e.state.wasm),e.setState({wasm:!e.state.wasm})}},(0,a.h)("span",{"class":"icon"},"W")),(0,a.h)("div",{"class":"dropdown "+(this.state.optionsVisible&&"is-active")},(0,a.h)("div",{"class":"dropdown-trigger"},(0,a.h)("button",{"class":"button is-small",onClick:function(){e.setState({optionsVisible:!e.state.optionsVisible})}},(0,a.h)("span",{"class":"icon is-small"},(0,a.h)("i",{"class":"fas fa-cog"}))," ",(0,a.h)("span",{"class":"icon is-small"},(0,a.h)("i",{"class":"fas fa-angle-down","aria-hidden":"true"})))),(0,a.h)("div",{"class":"dropdown-menu",id:"dropdown-menu2",role:"menu"},(0,a.h)("div",{"class":"dropdown-content"},(0,a.h)("div",{"class":"dropdown-item"},(0,a.h)("label",{"class":"checkbox"},(0,a.h)("input",{type:"checkbox",onChange:function(t){return e.props.changeOption("showIDs",t.target.checked)}}),"Show IDs")),(0,a.h)("a",{"class":"dropdown-item",onClick:this.props.save},"Save"),(0,a.h)("a",{"class":"dropdown-item",onClick:this.props.load},"Load"))))))}}]),t}(a.Component);e["default"]=l}),require.register("js/ui/components/load-modal/load-modal.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=t("preact"),l=t("js/shared/config"),u=(o(l),function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.load=function(){n.props.worker.postMessage(["load",n.state.loadData]),n.setState({loaded:!0,success:!0})},n.setData=function(e){n.setState({loadData:e.target.value})},n.state={loaded:!1,success:!1,loadData:""},n}return i(t,e),a(t,[{key:"render",value:function(){var e=this;return(0,c.h)("div",{"class":"modal "+(this.props.visible&&"is-active")},(0,c.h)("div",{"class":"modal-background"}),(0,c.h)("div",{"class":"modal-card"},(0,c.h)("header",{"class":"modal-card-head"},(0,c.h)("p",{"class":"modal-card-title"},"Save"),(0,c.h)("button",{"class":"delete","aria-label":"close",onClick:this.props.close})),(0,c.h)("section",{"class":"modal-card-body"},(0,c.h)("div",{"class":"content"},(0,c.h)("p",null,"Paste your code below to load the simulation state."),(0,c.h)("div",{"class":"field has-addons"},(0,c.h)("div",{"class":"control"},(0,c.h)("input",{"class":"input",type:"text",onChange:function(t){return e.setData(t)}})),(0,c.h)("div",{"class":"control"},(0,c.h)("button",{"class":"button",onClick:this.load},(0,c.h)("span",{"class":"icon is-small"},(0,c.h)("i",{"class":"fas fa-download"}))))),this.state.loaded&&(0,c.h)("p",null,this.state.success?"Loaded":"load failed")))))}}]),t}(c.Component));e["default"]=u}),require.register("js/ui/components/save-modal/save-modal.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=t("preact"),l=t("js/shared/config"),u=(o(l),function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.copy=function(){var e=document.createRange();e.selectNode(n.input),window.getSelection().addRange(e);try{document.execCommand("copy");n.setState({copied:!0,success:!0})}catch(t){n.setState({copied:!0,success:!1})}window.getSelection().removeAllRanges()},n.state={copied:!1,success:!1},n}return i(t,e),a(t,[{key:"render",value:function(){var e=this;return(0,c.h)("div",{"class":"modal "+(this.props.visible&&"is-active")},(0,c.h)("div",{"class":"modal-background"}),(0,c.h)("div",{"class":"modal-card"},(0,c.h)("header",{"class":"modal-card-head"},(0,c.h)("p",{"class":"modal-card-title"},"Save"),(0,c.h)("button",{"class":"delete","aria-label":"close",onClick:this.props.close})),(0,c.h)("section",{"class":"modal-card-body"},(0,c.h)("div",{"class":"content"},(0,c.h)("p",null,"Copy the code below to save the current state of the simulation."),(0,c.h)("div",{"class":"field has-addons"},(0,c.h)("div",{"class":"control"},(0,c.h)("input",{ref:function(t){return e.input=t},"class":"input",type:"text",readOnly:!0,value:this.props.saveData})),(0,c.h)("div",{"class":"control"},(0,c.h)("button",{"class":"button",onClick:this.copy},(0,c.h)("span",{"class":"icon is-small"},(0,c.h)("i",{"class":"fas fa-copy"}))))),this.state.copied&&(0,c.h)("p",null,this.state.success?"Copied":"Copy failed")))))}}]),t}(c.Component));e["default"]=u}),require.register("js/ui/components/stats/stats.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=t("preact"),l=t("js/shared/config"),u=o(l),d=function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={simSpeeds:new Array(100).fill(u.simulationSpeed),calculatedSimSpeed:u.simulationSpeed,elapsedTimes:new Array(100).fill(0),calculatedelapsedTime:0},n}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.simSpeeds;t.pop(),t.unshift(e.trueSimulationSpeed);var n=t.reduce(function(e,t){return e+t},0);this.setState({simSpeeds:t,calculatedSimSpeed:n/t.length});var o=this.state.elapsedTimes;o.pop(),o.unshift(e.elapsedTimeSumAverage),n=o.reduce(function(e,t){return e+t},0),this.setState({elapsedTimes:o,calculatedelapsedTime:n/o.length})}},{key:"render",value:function(){return(0,c.h)("div",{"class":"stats"},(0,c.h)("span",null,"(",this.props.originCoords.x.toFixed(0),", ",this.props.originCoords.y.toFixed(0),") "),(0,c.h)("span",null,this.state.calculatedSimSpeed.toFixed(2),"x "),(0,c.h)("span",null,this.props.fps,"fps "),(0,c.h)("span",null,this.state.calculatedelapsedTime.toFixed(2),"ms"))}}]),t}(c.Component);e["default"]=d}),require.alias("preact/dist/preact.js","preact"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");